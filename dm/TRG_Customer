CREATE OR REPLACE TRIGGER TRG_CUSTOMER
BEFORE INSERT OR UPDATE ON CUSTOMER
FOR EACH ROW
DECLARE
BEGIN
 IF (:NEW.CREDITS < 0) THEN
  RAISE_APPLICATION_ERROR(-20999, 'The Balance '|| :NEW.CREDITS ||'cannot be negative');
 END IF;
 
  
 IF(:NEW.BIRTHDATE > SYSDATE) THEN
  RAISE_APPLICATION_ERROR(-20998, 'The Birthdate cannot be in the Future');
 END IF;
 
 IF NOT regexp_like(:NEW.EMAIL,'@') THEN 
  RAISE_APPLICATION_ERROR(-20997, 'The Email is not an E-Mail');
 END IF;
 
  
 IF(UPDATING) THEN
  :NEW.BIRTHDATE := :OLD.BIRTHDATE;
 END IF;


END TRG_CUSTOMER;
